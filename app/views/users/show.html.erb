<p id="notice"><%= notice %></p>

<div class="container container-show-user">
  <div class="row mb-3">
  	<div class="col-lg-6 mb-3">
      <div class="card">
      	<% if current_user.id == @user.id %>
          <h5 class="card-header text-white">Mes informations</h5>
      	<% else %>
      	  <h5 class="card-header text-white">Informations</h5>
      	<% end %>
        <div class="card-body">
          <p>Prénom : <%= @user.first_name %></p>
          <p>Nom : <%= @user.last_name %></p>
          <p>Email : <%= @user.email %></p>
          <% if current_user.id == @user.id %>
            <%= link_to 'Modifer les informations', edit_user_registration_path(@user), class: "btn btn-primary mt-3" %>
          <% end %>
        </div>
      </div>
  	</div>
  	<div class="col-lg-6">
      <div class="card">
      	<% if current_user.id == @user.id %>
          <h5 class="card-header text-white">Mes expériences de stage</h5>
      	<% else %>
      	  <h5 class="card-header text-white">Expériences de stage</h5>
      	<% end %>
        <div class="card-body">
          <% if current_user.id == @user.id && (@user.internships == [] || @user.internships == nil) %>
            <p>Vous n'avez pas encore renseigné de stage. Pensez à le faire pour aider la communauté !</p>
            <%= link_to "Créer une expérience de stage", new_internship_path, class: "btn btn-success mt-2" %>
          <% elsif current_user.id != @user.id && (@user.internships == [] || @user.internships == nil) %>
          	<p>Cet utilisateur n'a pas renseigné d'expérience de stage.</p>
          <% else %>
            <% @user.internships.each do |internship| %>
              <div class="row">
              	<div class="col-6">
              	  <span><%= internship.title %></span>
              	</div>
	            <div class="col-6 text-right">
	              <span><%= link_to "Voir", internship_path(internship.id), class: "btn btn-secondary" %></span>
	              <%= link_to "Modifier", edit_internship_path(internship.id), class: "btn btn-primary" %> 	
	            </div>   
              </div>
	          <% unless internship == @user.internships.last %>
	            <hr>
	          <% end %>
            <% end %>
          <% end %>
        </div>
      </div>	
  	</div>
  </div>
  <div class="row">
  	<div class="col-lg-6 mb-3">
      <div class="card">
      	<% if current_user.id == @user.id %>
          <h5 class="card-header text-white">Les stages que j'ai commentés</h5>
      	<% else %>
      	  <h5 class="card-header text-white">Stages commmentés</h5>
      	<% end %>
        <div class="card-body">
          <% if current_user.id == @user.id && (@user.comments == [] || @user.comments == nil) %>
            <p>Vous n'avez pas encore commenté de stage.</p>
          <% elsif current_user.id != @user.id && (@user.comments == [] || @user.comments == nil) %>
          	<p>Cet utilisateur n'a pas commenté de stage.</p>
          <% elsif @user.comments.length > 3 %>
	        <% @user.comments[0..2].each do |comment| %>
	          <div class="row">
	            <div class="col-6">
	              <span><%= comment.internship.title %></span>
	            </div>
	            <div class="col-6 text-right">
	              <span><%= link_to "Voir", internship_path(comment.internship.id), class: "btn btn-secondary" %></span>
	            </div>
	          </div>
              <% unless comment == @user.comment.last %>
                <hr>
              <% end %>
	        <% end %>
	        <%= link_to "Voir tous les commentaires", comments_path, class: "btn btn-secondary" %>          
          <% else %>
            <% @user.comments.each do |comment| %>
              <div class="row">
              	<div class="col-6">
              	  <%= comment.internship.title %>
              	</div>
              	<div class="col-6 text-right">
              	  <%= link_to "Voir", internship_path(comment.internship.id), class: "btn btn-secondary" %>
              	</div>
              </div>
              <% unless comment == @user.comments.last %>
                <hr>
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
  	</div>
  	<div class="col-lg-6">
  	  <% if current_user.id == @user.id %>
        <div class="card">
          <h5 class="card-header text-white">Mes stages favoris</h5>
          <div class="card-body">
            <% if @user.favorites == [] || @user.favorites == nil %>
              <p>Vous n'avez pas encore de stage en favori.</p>
            <% elsif @user.favorites.length > 3 %>
	          <% @user.favorites[0..2].each do |favorite| %>
	            <div class="row">
	              <div class="col-6">
	              	<span><%= favorite.favorite_internship.title %></span>
	              </div>
	              <div class="col-6 text-right">
	              	<span><%= link_to "Voir", internship_path(favorite.favorite_internship.id), class: "btn btn-secondary" %></span>
	              	<%= link_to "Retirer", favorite_path(favorite.id), data: { confirm: "Êtes-vous sûr ?" }, method: :delete, class: "btn btn-danger" %>
	              </div>
	            </div>
                <% unless favorite == @user.favorites.last %>
                  <hr>
                <% end %>
	          <% end %>
	          <%= link_to "Voir tous les favoris", favorites_path, class: "btn btn-secondary" %>
            <% else %>
	          <% @user.favorites.each do |favorite| %>
	            <div class="row">
	              <div class="col-6">
	              	<span><%= favorite.favorite_internship.title %></span>
	              </div>
	              <div class="col-6 text-right">
	              	<span><%= link_to "Voir", internship_path(favorite.favorite_internship.id), class: "btn btn-secondary" %></span>
	              	<%= link_to "Retirer", favorite_path(favorite.id), data: { confirm: "Êtes-vous sûr ?" }, method: :delete, class: "btn btn-danger" %>
	              </div>
	            </div>
                <% unless favorite == @user.favorites.last %>
              	  <hr>
                <% end %>
	          <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
  	</div>
  </div>
  <%= link_to 'Retour', root_path, class: "btn btn-outline-secondary mt-3" %>
</div>
